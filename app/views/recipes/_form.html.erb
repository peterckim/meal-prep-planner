<%= form_for recipe do |f| %>
    <%= f.label "Name" %>
    <%= f.text_field :name %>
    <%= f.label "Content" %>
    <%= f.text_area :content %>
    <%= f.collection_check_boxes :ingredient_ids, Ingredient.all, :id, :name %>
    
    <%= f.fields_for :recipe_ingredients, recipe.recipe_ingredients.build do |recipe_ingredients_fields| %>
        <%= recipe_ingredients_fields.label "Quantity" %>
        <%= recipe_ingredients_fields.text_field :quantity %>
        <%= recipe_ingredients_fields.fields_for :ingredient, recipe_ingredients_fields.object.build_ingredient do |ingredient_fields| %>
            <%= ingredient_fields.label "New Ingredient Name" %>
            <%= ingredient_fields.text_field :name %> 
        <% end %>
    <% end %>

    <%= f.submit %>
<% end %>


<!--
    params = {
        recipe: {
            name: "Name",
            content: "Content",

            ingredient_ids: [],

            recipe_ingredients_attributes: {
                0: {
                    quantity: "quantity",
                    ingredient_attributes: {
                        name: "Name"
                    }
                }
            }
        }
    }
-->